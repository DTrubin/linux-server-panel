# 用户手册

欢迎使用 Linux Server Panel！这是一个功能完整的用户使用指南，将帮助您掌握系统的所有功能。

## 📚 目录

1. [基础操作](#基础操作)
2. [仪表盘使用](#仪表盘使用)
3. [文件管理](#文件管理)
4. [Web 终端](#web-终端)
5. [任务调度](#任务调度)
6. [日志管理](#日志管理)
7. [系统设置](#系统设置)
8. [个人资料](#个人资料)

## 🔰 基础操作

### 登录系统

1. **访问地址**: 在浏览器中输入服务器地址
2. **输入凭据**: 使用管理员账户登录
   - 默认用户名: `admin`
   - 默认密码: 在配置文件中设置
3. **安全提醒**: 首次登录后请立即修改密码

### 界面布局

#### 顶部导航栏
- **系统标题**: 显示 "Linux Server Panel"
- **连接状态**: 实时显示 WebSocket 连接状态
- **用户菜单**: 个人资料、设置、登出

#### 左侧菜单
- **仪表盘**: 系统监控概览
- **文件管理**: 文件系统操作
- **终端**: Web 命令行界面
- **任务调度**: 定时任务管理
- **日志管理**: 日志查看和分析
- **关于**: 系统信息和版本

#### 主内容区
- **页面内容**: 当前功能模块的主界面
- **操作面板**: 相关工具和操作按钮
- **状态显示**: 实时信息和进度提示

### 基本操作

#### 刷新数据
- **快捷键**: `Ctrl + R` 或 `F5`
- **刷新按钮**: 点击页面上的刷新图标
- **自动刷新**: 部分数据会自动更新

#### 搜索功能
- **全局搜索**: 在文件管理器中使用搜索框
- **过滤器**: 使用下拉菜单筛选内容
- **关键字**: 输入关键字快速定位

#### 批量操作
- **多选**: 使用 Checkbox 选择多个项目
- **全选**: 点击表头的全选按钮
- **批量操作**: 选择后执行批量删除、下载等

## 📊 仪表盘使用

### 系统概览卡片

#### CPU 监控
```
当前使用率: 25.6%
核心数量: 8 核心
线程数量: 16 线程
当前频率: 2.4 GHz
负载平均: 1.2, 1.5, 1.8
```

**状态指示**:
- 🟢 绿色: 使用率 < 70% (正常)
- 🟡 黄色: 使用率 70-85% (警告)
- 🔴 红色: 使用率 > 85% (危险)

#### 内存监控
```
总内存: 16.0 GB
已使用: 8.0 GB (50%)
可用内存: 8.0 GB
缓存: 2.1 GB
缓冲区: 512 MB
```

**内存类型说明**:
- **已使用**: 应用程序占用的内存
- **缓存**: 系统文件缓存
- **缓冲区**: I/O 缓冲区
- **可用**: 真正可用的内存

#### 磁盘监控
```
总容量: 500 GB
已使用: 250 GB (50%)
可用空间: 250 GB
文件系统: ext4
挂载点: /
```

**多分区显示**:
- 系统会显示所有挂载的分区
- 点击可查看详细信息
- 支持不同文件系统类型

#### 网络监控
```
上传速度: 1.5 MB/s
下载速度: 3.2 MB/s
网络接口: eth0, wlan0
连接数: 45
```

### 实时图表

#### 图表切换
点击不同标签页查看对应的监控图表：
- **CPU**: CPU 使用率趋势
- **内存**: 内存使用历史
- **磁盘**: 磁盘 I/O 性能
- **网络**: 网络流量双向图

#### 图表功能
- **实时更新**: 每秒更新一次数据
- **历史数据**: 显示最近 60 个数据点
- **鼠标交互**: 悬停查看具体数值
- **缩放功能**: 双击图表区域重置视图

#### 图表说明
```javascript
// CPU 图表显示
- X 轴: 时间 (最近 60 秒)
- Y 轴: 使用率百分比 (0-100%)
- 颜色: 根据使用率变化 (绿色→黄色→红色)

// 内存图表显示  
- 总内存: 固定线条
- 已用内存: 实时曲线
- 可用内存: 计算显示

// 网络图表显示
- 上传: 红色曲线
- 下载: 蓝色曲线
- 单位: MB/s 或 KB/s
```

### 系统告警

#### 告警类型
- **资源告警**: CPU、内存、磁盘使用率过高
- **服务告警**: 重要服务停止或异常
- **网络告警**: 连接中断或延迟过高
- **安全告警**: 异常登录或权限变更

#### 告警处理
1. **查看详情**: 点击告警消息查看详细信息
2. **快速处理**: 使用告警中的快捷操作
3. **查看日志**: 跳转到相关日志页面
4. **标记处理**: 标记告警为已处理

## 📁 文件管理

### 文件浏览

#### 导航操作
```
面包屑导航: / > home > user > documents
- 点击任意路径段快速跳转
- 支持键盘方向键导航
- 双击文件夹进入下级目录
```

#### 工具栏功能
- **新建文件夹**: 创建新目录
- **新建文件**: 创建空文件
- **上传文件**: 单个或批量上传
- **刷新**: 重新加载当前目录
- **显示隐藏文件**: 切换隐藏文件显示

#### 文件列表
文件列表显示以下信息：
- **名称**: 文件或文件夹名称
- **类型**: file(文件) / directory(目录) / symlink(链接)
- **大小**: 文件大小 (文件夹显示为 "-")
- **权限**: Unix 权限格式 (如 rwxr-xr-x)
- **所有者**: 文件所有者用户名
- **修改时间**: 最后修改日期时间

### 文件操作

#### 基础操作
```
双击操作:
- 文件夹: 进入目录
- 文本文件: 打开编辑器
- 二进制文件: 下载文件

右键菜单:
- 重命名
- 删除
- 复制
- 移动
- 下载
- 查看属性
```

#### 批量操作
1. **选择文件**: 使用 Checkbox 选择多个文件
2. **批量下载**: 选中的文件会打包成 ZIP 下载
3. **批量删除**: 确认后删除所有选中文件
4. **批量移动**: 移动到指定目录

### 文件上传

#### 单文件上传
1. 点击 "上传文件" 按钮
2. 选择本地文件
3. 确认上传路径
4. 等待上传完成

#### 批量上传
1. 点击 "批量上传" 按钮
2. 拖拽多个文件到上传区域
3. 或点击选择多个文件
4. 查看上传进度和结果

#### 上传限制
- **文件大小**: 单个文件最大 100MB
- **文件类型**: 支持所有常见类型
- **同时上传**: 最多同时上传 10 个文件
- **断点续传**: 大文件支持断点续传

### 在线编辑

#### 支持的文件类型
```
文本文件: .txt, .md, .log, .conf
代码文件: .js, .ts, .vue, .py, .java, .cpp, .go
配置文件: .json, .yaml, .xml, .ini, .env
脚本文件: .sh, .bat, .ps1
Web 文件: .html, .css, .scss, .less
```

#### 编辑器功能
- **语法高亮**: 根据文件类型自动识别
- **代码折叠**: 长代码块可以折叠
- **查找替换**: Ctrl+F 查找，Ctrl+H 替换
- **行号显示**: 左侧显示行号
- **自动缩进**: 智能代码缩进
- **自动保存**: 可配置自动保存间隔

#### 编辑器快捷键
```
Ctrl + S: 保存文件
Ctrl + F: 查找文本
Ctrl + H: 查找替换
Ctrl + G: 跳转到指定行
Ctrl + Z: 撤销操作
Ctrl + Y: 重做操作
Ctrl + A: 全选文本
```

### 文件搜索

#### 快速搜索
在文件列表上方的搜索框中输入关键字：
- **文件名搜索**: 默认搜索文件名
- **实时过滤**: 输入时实时过滤结果
- **大小写**: 不区分大小写
- **清除搜索**: 点击 X 清除搜索条件

#### 高级搜索 (计划功能)
- **文件内容搜索**: 搜索文件内容
- **正则表达式**: 支持正则表达式匹配
- **文件类型筛选**: 只搜索特定类型文件
- **大小筛选**: 按文件大小范围筛选
- **时间筛选**: 按修改时间筛选

## 💻 Web 终端

### 终端连接

#### 建立连接
1. 点击左侧菜单 "终端"
2. 等待 WebSocket 连接建立
3. 出现命令提示符表示连接成功
4. 可以开始输入命令

#### 连接状态
- **连接中**: 黄色圆点，显示 "连接中..."
- **已连接**: 绿色圆点，显示 "已连接"
- **连接断开**: 红色圆点，显示 "连接断开"

#### 连接问题排查
```bash
# 检查 WebSocket 连接
# 在浏览器开发者工具的 Network 选项卡中查看 WS 连接

# 常见问题:
1. 防火墙阻止 WebSocket 端口
2. 代理服务器不支持 WebSocket
3. 网络连接不稳定
```

### 命令执行

#### 基本命令
```bash
# 文件操作
ls -la                    # 列出文件详情
cd /path/to/directory     # 切换目录
pwd                       # 显示当前路径
mkdir new_folder          # 创建目录
touch new_file.txt        # 创建文件
rm file.txt               # 删除文件
cp source.txt dest.txt    # 复制文件
mv old_name.txt new_name.txt  # 重命名/移动

# 系统信息
ps aux                    # 查看进程
top                       # 实时进程监控
htop                      # 更好用的进程监控
df -h                     # 磁盘使用情况
free -h                   # 内存使用情况
uname -a                  # 系统信息

# 网络操作
ping google.com           # 网络连通性测试
netstat -tlnp            # 查看网络连接
ss -tlnp                 # 更现代的网络连接查看
curl -I http://example.com  # HTTP 请求测试

# 文本处理
cat file.txt             # 查看文件内容
less file.txt            # 分页查看文件
head -n 10 file.txt      # 查看文件前10行
tail -f /var/log/syslog  # 实时查看日志
grep "error" file.txt    # 搜索文件内容
```

#### 进阶命令
```bash
# 系统管理
sudo systemctl status nginx     # 查看服务状态
sudo systemctl start nginx      # 启动服务
sudo systemctl restart nginx    # 重启服务
sudo systemctl enable nginx     # 设置开机启动

# 进程管理
kill -9 <PID>                  # 强制终止进程
killall process_name           # 终止指定名称的所有进程
nohup command &                # 后台运行命令

# 文件权限
chmod 755 script.sh           # 修改文件权限
chown user:group file.txt      # 修改文件所有者
sudo chown -R www-data:www-data /var/www  # 递归修改

# 磁盘管理
du -sh /path/to/directory      # 查看目录大小
find / -type f -size +100M     # 查找大文件
lsblk                          # 查看磁盘分区
```

### 终端功能

#### 命令历史
- **上下箭头**: 浏览命令历史
- **History 命令**: `history` 查看历史命令
- **搜索历史**: `Ctrl + R` 搜索历史命令
- **重复命令**: `!!` 重复上一个命令

#### 快捷键
```
Ctrl + C: 中断当前命令
Ctrl + D: 退出当前会话
Ctrl + L: 清屏
Ctrl + A: 光标移到行首
Ctrl + E: 光标移到行尾
Ctrl + K: 删除光标到行尾
Ctrl + U: 删除光标到行首
Ctrl + W: 删除前一个单词
```

#### 会话管理
- **会话保持**: 连接断开后会话保留一段时间
- **重新连接**: 刷新页面后自动重连
- **多标签**: 可以开启多个终端标签 (计划功能)
- **会话共享**: 多用户共享终端会话 (计划功能)

### 终端配置

#### 外观设置
- **字体大小**: 可调节终端字体大小
- **颜色主题**: 支持多种颜色主题
- **背景色**: 自定义背景颜色
- **透明度**: 调节终端透明度

#### 行为设置
- **自动换行**: 长命令自动换行
- **声音提示**: 命令完成声音提示
- **自动保存**: 自动保存命令历史
- **快捷键**: 自定义快捷键绑定

## ⏰ 任务调度

### 任务管理

#### 任务列表
任务列表显示所有定时任务的信息：
- **任务名称**: 任务的描述性名称
- **状态**: 启用/禁用状态
- **触发类型**: Cron 表达式或时间间隔
- **下次执行**: 预计下次执行时间
- **最后执行**: 上次执行时间和结果
- **创建时间**: 任务创建日期

#### 任务状态
```
🟢 正常运行: 任务按计划正常执行
🟡 等待执行: 任务已启用，等待下次触发
🔴 执行失败: 最近一次执行失败
⏸️ 已暂停: 任务被手动暂停
⚙️ 正在执行: 任务当前正在运行
```

### 创建任务

#### 基本信息
```
任务名称: 系统备份任务
描述: 每日凌晨备份重要数据
命令: /home/scripts/backup.sh
工作目录: /home/scripts
```

#### 触发设置
**Cron 表达式**:
```
格式: 分 时 日 月 周
示例:
0 2 * * *     # 每天凌晨2点执行
0 */6 * * *   # 每6小时执行一次
0 0 1 * *     # 每月1号执行
0 0 * * 0     # 每周日执行
*/5 * * * *   # 每5分钟执行
```

**时间间隔**:
```
每隔 30 分钟执行
每隔 2 小时执行
每隔 1 天执行
每隔 1 周执行
```

#### 高级选项
- **超时设置**: 任务最大执行时间
- **重试次数**: 失败后重试次数
- **环境变量**: 任务执行时的环境变量
- **优先级**: 任务执行优先级
- **并发控制**: 是否允许并发执行

### 任务执行

#### 手动执行
1. 在任务列表中找到目标任务
2. 点击 "立即执行" 按钮
3. 确认执行操作
4. 查看执行结果

#### 执行监控
```
执行状态:
- 等待中: 任务在执行队列中等待
- 执行中: 任务正在运行
- 成功: 任务执行成功 (退出码 0)
- 失败: 任务执行失败 (退出码非 0)
- 超时: 任务执行超过设定时间
- 中止: 任务被手动中止
```

#### 执行历史
- **执行时间**: 任务开始和结束时间
- **执行时长**: 任务运行耗时
- **退出码**: 命令返回的退出码
- **输出内容**: 命令的标准输出
- **错误信息**: 命令的错误输出

### 任务模板

#### 常用任务模板
```bash
# 1. 数据库备份
mysqldump -u root -p database_name > backup_$(date +%Y%m%d).sql

# 2. 日志清理
find /var/log -name "*.log" -mtime +30 -delete

# 3. 系统更新
apt update && apt upgrade -y

# 4. 磁盘清理
rm -rf /tmp/* && docker system prune -f

# 5. 服务重启
systemctl restart nginx

# 6. 文件同步
rsync -av /source/ /destination/

# 7. 系统监控
echo "$(date): CPU $(cat /proc/loadavg)" >> /var/log/system_monitor.log
```

#### 脚本示例
```bash
#!/bin/bash
# 系统健康检查脚本

LOG_FILE="/var/log/health_check.log"
DATE=$(date '+%Y-%m-%d %H:%M:%S')

echo "[$DATE] 开始系统健康检查" >> $LOG_FILE

# 检查磁盘空间
DISK_USAGE=$(df / | tail -1 | awk '{print $5}' | sed 's/%//')
if [ $DISK_USAGE -gt 80 ]; then
    echo "[$DATE] 警告: 磁盘使用率超过 80%" >> $LOG_FILE
fi

# 检查内存使用
MEM_USAGE=$(free | grep Mem | awk '{printf "%.0f", $3/$2 * 100.0}')
if [ $MEM_USAGE -gt 85 ]; then
    echo "[$DATE] 警告: 内存使用率超过 85%" >> $LOG_FILE
fi

# 检查重要服务
SERVICES=("nginx" "mysql" "ssh")
for service in "${SERVICES[@]}"; do
    if ! systemctl is-active --quiet $service; then
        echo "[$DATE] 错误: 服务 $service 未运行" >> $LOG_FILE
    fi
done

echo "[$DATE] 系统健康检查完成" >> $LOG_FILE
```

## 📋 日志管理

### 日志查看

#### 日志文件列表
系统会显示可用的日志文件：
- **系统日志**: /var/log/syslog, /var/log/messages
- **应用日志**: 应用程序生成的日志
- **服务日志**: Nginx, Apache, MySQL 等服务日志
- **自定义日志**: 用户自定义的日志文件

#### 日志选择
1. 点击 "选择日志文件" 按钮
2. 浏览文件系统选择日志文件
3. 支持的文件类型:
   - .log 文件
   - .txt 文本文件
   - 无扩展名的日志文件

### 日志浏览

#### 虚拟滚动
对于大型日志文件，系统使用虚拟滚动技术：
- **高性能**: 支持 GB 级别的大文件
- **按需加载**: 只加载可见部分
- **流畅滚动**: 保持流畅的滚动体验
- **内存优化**: 最小化内存占用

#### 日志导航
```
滚动控制:
- 鼠标滚轮: 上下滚动
- 滚动条: 拖拽快速定位
- 键盘方向键: 精确滚动
- Page Up/Down: 分页滚动

快速跳转:
- 跳转到顶部: Home 键
- 跳转到底部: End 键
- 跳转到指定行: Ctrl + G
```

#### 实时更新
- **自动刷新**: 日志文件有新内容时自动更新
- **跟随尾部**: 自动滚动到最新内容
- **暂停更新**: 暂停自动更新功能
- **手动刷新**: 手动刷新日志内容

### 日志搜索

#### 关键字搜索
1. 在搜索框中输入关键字
2. 按 Enter 开始搜索
3. 系统会高亮显示匹配的内容
4. 使用上下箭头在匹配项间跳转

#### 搜索选项
- **区分大小写**: 开启/关闭大小写敏感
- **全词匹配**: 只匹配完整单词
- **正则表达式**: 使用正则表达式搜索
- **搜索范围**: 搜索指定行范围

#### 常用搜索模式
```
错误搜索:
error|Error|ERROR
exception|Exception
fail|failed|failure

时间搜索:
2025-07-12         # 特定日期
\d{4}-\d{2}-\d{2}  # 日期格式 (正则)
\d{2}:\d{2}:\d{2}  # 时间格式 (正则)

IP 地址搜索:
\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\b

状态码搜索:
\b[45]\d{2}\b      # 4xx 和 5xx 错误
```

### 日志分析

#### 统计信息
- **总行数**: 日志文件总行数
- **文件大小**: 日志文件大小
- **时间范围**: 日志的时间跨度
- **搜索结果**: 搜索匹配的条目数

#### 日志级别
识别不同级别的日志信息：
```
🔴 ERROR: 错误信息
🟠 WARN:  警告信息
🔵 INFO:  一般信息
🟢 DEBUG: 调试信息
⚪ TRACE: 跟踪信息
```

#### 日志格式识别
系统能够识别常见的日志格式：
- **Apache 访问日志**: Combined Log Format
- **Nginx 访问日志**: 默认格式
- **系统日志**: Syslog 格式
- **应用日志**: JSON 格式
- **自定义格式**: 用户定义格式

### 日志下载

#### 下载选项
- **完整文件**: 下载整个日志文件
- **选定范围**: 下载指定行范围
- **搜索结果**: 只下载搜索匹配的行
- **压缩下载**: 大文件自动压缩

#### 导出格式
- **原始格式**: 保持原始日志格式
- **CSV 格式**: 结构化数据导出
- **JSON 格式**: JSON 结构导出
- **过滤格式**: 只导出关键字段

## ⚙️ 系统设置

### 基本设置

#### 系统信息
查看系统的基本信息：
```
主机名: server-01
操作系统: Ubuntu 20.04.3 LTS
内核版本: 5.4.0-74-generic
运行时间: 15 天 6 小时 32 分钟
最后重启: 2025-06-27 14:30:15
```

#### 服务状态
监控重要系统服务：
- **SSH**: 远程连接服务
- **Nginx**: Web 服务器
- **MySQL**: 数据库服务
- **Docker**: 容器服务
- **Cron**: 定时任务服务

### 安全设置

#### 访问控制
- **IP 白名单**: 允许访问的 IP 地址列表
- **登录限制**: 登录失败次数限制
- **会话超时**: 自动登出时间设置
- **双因素认证**: 启用 2FA 认证 (计划功能)

#### 密码策略
- **最小长度**: 密码最少字符数
- **复杂度要求**: 必须包含大小写、数字、特殊字符
- **有效期**: 密码有效期设置
- **历史记录**: 防止重复使用旧密码

### 监控设置

#### 告警阈值
```
CPU 使用率:
- 警告阈值: 70%
- 危险阈值: 85%

内存使用率:
- 警告阈值: 75%
- 危险阈值: 90%

磁盘使用率:
- 警告阈值: 80%
- 危险阈值: 95%

网络延迟:
- 警告阈值: 100ms
- 危险阈值: 500ms
```

#### 通知设置
- **邮件通知**: 配置 SMTP 服务器
- **Webhook**: 集成第三方通知服务
- **短信通知**: 集成短信服务 (计划功能)
- **推送通知**: 浏览器推送通知

### 备份设置

#### 自动备份
- **备份频率**: 每日/每周/每月备份
- **备份时间**: 指定备份执行时间
- **保留期限**: 备份文件保留天数
- **备份路径**: 备份文件存储位置

#### 备份内容
- **配置文件**: 系统和应用配置
- **数据文件**: 用户数据和数据库
- **日志文件**: 重要日志文件
- **自定义文件**: 用户指定的文件和目录

## 👤 个人资料

### 基本信息

#### 用户信息
- **用户名**: 显示当前登录用户名
- **角色**: 用户角色 (管理员/普通用户)
- **最后登录**: 上次登录时间和 IP
- **创建时间**: 用户账户创建时间

#### 登录历史
查看最近的登录记录：
```
时间: 2025-07-12 09:30:15
IP 地址: 192.168.1.100
浏览器: Chrome 91.0
状态: 成功登录
```

### 安全设置

#### 修改密码
1. 输入当前密码
2. 输入新密码
3. 确认新密码
4. 点击 "更新密码" 保存

**密码要求**:
- 最少 8 个字符
- 包含大小写字母
- 包含数字
- 包含特殊字符

#### 会话管理
- **当前会话**: 显示当前活动会话
- **其他会话**: 显示其他设备的登录会话
- **终止会话**: 强制登出其他设备
- **全部登出**: 登出所有设备

### 个性化设置

#### 界面设置
- **主题**: 浅色/深色主题切换
- **语言**: 界面语言设置
- **时区**: 本地时区设置
- **日期格式**: 日期显示格式

#### 功能设置
- **自动刷新**: 数据自动刷新间隔
- **通知**: 浏览器通知权限
- **声音**: 操作声音提示
- **快捷键**: 自定义快捷键

---

通过这个详细的用户手册，您可以充分掌握 Linux Server Panel 的所有功能。如果在使用过程中遇到问题，请参考 [故障排除指南](operations/troubleshooting.md) 或联系技术支持。
